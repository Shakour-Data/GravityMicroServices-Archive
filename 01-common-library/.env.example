# ================================================================================
# Environment Configuration for 01-common-library v1.1.0
# ================================================================================
# Following Gravity MicroServices standards from TEAM_PROMPT.md
# 
# ⚠️  SECURITY WARNING:
# - Never commit actual .env file to git
# - Always use strong passwords in production (min 16 chars, mixed case, numbers, symbols)
# - Rotate secrets regularly (every 90 days minimum)
# - Use proper secrets management (HashiCorp Vault, AWS Secrets Manager, etc.)
# - Never expose this configuration in public repositories
# ================================================================================

# ==============================================================================
# Application Configuration
# ==============================================================================

# APP_NAME: Service identifier (Required)
# - Used for logging, metrics, and service discovery
# - Should match repository name
APP_NAME=01-common-library

# APP_VERSION: Current version (Required)
# - Follows Semantic Versioning (SemVer)
# - Format: MAJOR.MINOR.PATCH
APP_VERSION=1.1.0

# DEBUG: Enable debug mode (Optional, default: false)
# - Values: true|false
# - WARNING: Never enable in production!
# - Enables detailed error messages and stack traces
DEBUG=false

# LOG_LEVEL: Logging verbosity (Optional, default: INFO)
# - Values: DEBUG|INFO|WARNING|ERROR|CRITICAL
# - Production recommended: WARNING or ERROR
LOG_LEVEL=INFO

# ENVIRONMENT: Deployment environment (Required)
# - Values: development|staging|production
# - Affects security settings and logging
ENVIRONMENT=development

# PORT: Application HTTP port (Optional, default: 8100)
# - Range: 1024-65535 (avoid privileged ports <1024)
# - Must not conflict with other services
# - Port 8100 is standard for common-library
PORT=8100

# ==============================================================================
# Database Configuration (PostgreSQL 16+)
# ==============================================================================

# DATABASE_URL: Full PostgreSQL connection string (Required)
# - Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# - Used by SQLAlchemy and Alembic
# - Override individual components below if needed
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/common_library

# Individual components (Optional, overrides DATABASE_URL)
# DB_HOST: PostgreSQL server hostname (default: localhost)
DB_HOST=localhost

# DB_PORT: PostgreSQL server port (default: 5432)
# - Standard PostgreSQL port: 5432
# - Docker port mapping: 5401 (host) -> 5432 (container)
DB_PORT=5432

# DB_NAME: Database name (default: common_library)
# - Must exist or be created before first run
DB_NAME=common_library

# DB_USER: Database username (default: postgres)
# - Production: Use dedicated service account with minimal privileges
DB_USER=postgres

# DB_PASSWORD: Database password (Required)
# - CHANGE IN PRODUCTION! Use strong password (16+ chars)
# - Never use default passwords in production
DB_PASSWORD=postgres

# Connection pool settings (Performance tuning)
# DB_POOL_SIZE: Number of persistent connections (default: 10)
# - Increase for high-traffic applications
# - Range: 5-50 depending on load
DB_POOL_SIZE=10

# DB_MAX_OVERFLOW: Additional connections above pool_size (default: 20)
# - Allows burst traffic handling
# - Range: 10-100
DB_MAX_OVERFLOW=20

# DB_POOL_TIMEOUT: Seconds to wait for connection (default: 30)
# - Increase if database is slow to respond
# - Range: 10-60 seconds
DB_POOL_TIMEOUT=30

# DB_ECHO: Log all SQL queries (default: false)
# - Values: true|false
# - WARNING: Very verbose, use only for debugging
DB_ECHO=false

# ==============================================================================
# Redis Configuration (Cache & Session Store)
# ==============================================================================

# REDIS_URL: Full Redis connection string (Optional)
# - Format: redis://[:PASSWORD@]HOST:PORT/DB
# - If not set, Mock Redis (in-memory) will be used
REDIS_URL=redis://localhost:6379/0

# Individual components (Optional, overrides REDIS_URL)
# REDIS_HOST: Redis server hostname (default: localhost)
REDIS_HOST=localhost

# REDIS_PORT: Redis server port (default: 6379)
# - Standard Redis port: 6379
# - Docker port mapping: 6301 (host) -> 6379 (container)
REDIS_PORT=6379

# REDIS_DB: Redis database number (default: 0)
# - Range: 0-15 (Redis supports 16 databases)
# - Use different DB for different environments
REDIS_DB=0

# REDIS_PASSWORD: Redis authentication password (Optional)
# - Leave empty if Redis doesn't require password
# - Production: Always set password with requirepass in redis.conf
REDIS_PASSWORD=

# REDIS_MAX_CONNECTIONS: Maximum connection pool size (default: 50)
# - Adjust based on expected concurrent requests
# - Range: 10-200
REDIS_MAX_CONNECTIONS=50

# ==============================================================================
# Security Configuration
# ==============================================================================

# SECRET_KEY: Application secret key (REQUIRED - CHANGE IN PRODUCTION!)
# - Minimum length: 32 characters
# - Use cryptographically secure random string
# - Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# - NEVER commit actual secret to git
SECRET_KEY=your-secret-key-change-in-production-min-32-chars

# JWT_SECRET_KEY: JWT signing secret (REQUIRED - CHANGE IN PRODUCTION!)
# - Minimum length: 32 characters
# - Must be different from SECRET_KEY
# - Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production-min-32-chars

# JWT_ALGORITHM: JWT signing algorithm (default: HS256)
# - Values: HS256|HS384|HS512|RS256|RS384|RS512
# - HS256: Fast, symmetric (same key for sign/verify)
# - RS256: Slower, asymmetric (public/private key pair)
JWT_ALGORITHM=HS256

# JWT_ACCESS_TOKEN_EXPIRE_MINUTES: Access token lifespan (default: 30)
# - Range: 5-60 minutes
# - Shorter = more secure, more refresh requests
# - Longer = less secure, fewer refresh requests
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# JWT_REFRESH_TOKEN_EXPIRE_DAYS: Refresh token lifespan (default: 7)
# - Range: 1-30 days
# - Allows users to stay logged in
# - Refresh tokens stored securely, not in JWT payload
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing configuration
# PASSWORD_MIN_LENGTH: Minimum password length (default: 8)
# - Range: 8-128 characters
# - Production recommended: 12+
PASSWORD_MIN_LENGTH=8

# PASSWORD_HASH_ALGORITHM: Hashing algorithm (default: bcrypt)
# - Values: bcrypt (recommended)
# - bcrypt: Slow by design, resistant to brute-force
PASSWORD_HASH_ALGORITHM=bcrypt

# ==============================================================================
# CORS Configuration
# ==============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=*

# ==============================================================================
# Rate Limiting
# ==============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ==============================================================================
# Service Discovery (Consul)
# ==============================================================================
CONSUL_HOST=localhost
CONSUL_PORT=8500
SERVICE_DISCOVERY_ENABLED=false

# ==============================================================================
# External Services URLs (for inter-service communication)
# ==============================================================================
# API Gateway
API_GATEWAY_URL=http://localhost:8003

# Auth Service  
AUTH_SERVICE_URL=http://localhost:8005

# User Service
USER_SERVICE_URL=http://localhost:8006

# Notification Service
NOTIFICATION_SERVICE_URL=http://localhost:8007

# ==============================================================================
# Monitoring & Observability
# ==============================================================================
# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Jaeger tracing
TRACING_ENABLED=false
JAEGER_HOST=localhost
JAEGER_PORT=6831

# ==============================================================================
# Testing Configuration
# ==============================================================================
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/test_common_library
TEST_REDIS_URL=redis://localhost:6379/15

# ==============================================================================
# Service-Specific Configuration
# ==============================================================================
# No service-specific configuration needed